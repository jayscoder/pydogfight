<Root>
    <include path="{{filedir}}/policy/init.xml"/>
    <include path="{{filedir}}/policy/reward.xml"/>

    <ReactiveSequence>
        <CanFireMissile/>
        <IsNearestEnemyInHitRange/>
        <FireMissileAtNearestEnemy/>
    </ReactiveSequence>

    <ReactiveSelector>
        <include path="{{filedir}}/policy/handle_abnormal.xml"/>

        <Throttle duration="{{ 5 - episode // 200 }}" time="{{ time }}">
            <Parallel>
                <ThesisPPOFloatArray
                        key="param" high="1" low="-1" length="2"
                        domain="control,default,attack,evade"
                        path="{{filedir}}/{{filename}}/models/{{name}}"
                        tensorboard_log="{{output_run_id}}/{{name}}/{{agent_name}}"
                        log_interval="1"
                        verbose="0"
                        train="{{train}}"
                />
                <Sequence>
                    <IsMatchRule rule="{{ param[0] > 0 }}"/>
                    <FireMissileAtNearestEnemy/>
                </Sequence>
                <TurnHeading heading="{{ param[1] * 180 }}"/>
            </Parallel>
        </Throttle>
    </ReactiveSelector>
</Root>
