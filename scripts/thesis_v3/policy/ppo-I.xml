<Root>
    <include path="{{filedir}}/policy/init.xml"/>
    <include path="{{filedir}}/policy/reward.xml"/>

    <ThesisPPOValue
            domain="control,default,attack,evade"
            path="{{filedir}}/{{filename}}/models/{{name}}"
            tensorboard_log="{{output_run_id}}/{{name}}/{{agent_name}}"
            log_interval="1"
            verbose="0"
            train="{{train}}"
    />

    <ThesisPPOSwitcher
            name="ThesisPPOSwitcherFire"
            domain="control,default,attack,evade"
            path="{{filedir}}/{{filename}}/models/{{name}}"
            tensorboard_log="{{output_run_id}}/{{name}}/{{agent_name}}"
            log_interval="1"
            verbose="0"
            train="{{train}}"
            n_steps="180"
            allow_action_mask="true"
    >
        <Sequence>
            <CanFireMissile/>
            <IsEnemyDetected/>
            <FireMissileAtNearestEnemy/>
        </Sequence>
        <NoAction/>
    </ThesisPPOSwitcher>

    <ReactiveSelector>
        <include path="{{filedir}}/policy/handle_abnormal.xml"/>
        <ThesisPPOSwitcher
                name="ThesisPPOSwitcherControl"
                domain="control,default,attack,evade"
                path="{{filedir}}/{{filename}}/models/{{name}}"
                tensorboard_log="{{output_run_id}}/{{name}}/{{agent_name}}"
                log_interval="1"
                verbose="0"
                train="{{train}}"
                allow_action_mask="true"
        >
            <Sequence>
                <IsEnemyDetected/>
                <PurePursueNearestEnemy/>
            </Sequence>
            <Sequence>
                <IsMissileThreatDetected/>
                <Manoeuvre39ToEvadeMissile turn_angle="90"/>
            </Sequence>
            <Sequence>
                <IsMissileThreatDetected/>
                <Manoeuvre39ToEvadeMissile turn_angle="-90"/>
            </Sequence>
            <Sequence>
                <IsEnemyDetected/>
                <Manoeuvre39ToEvadeEnemy turn_angle="90"/>
            </Sequence>
            <Sequence>
                <IsEnemyDetected/>
                <Manoeuvre39ToEvadeEnemy turn_angle="-90"/>
            </Sequence>
            <KeepFly/>
        </ThesisPPOSwitcher>
    </ReactiveSelector>
</Root>
