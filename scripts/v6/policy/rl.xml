<Root name="V4RL">
    <RandomInitWaypointNearGameCenter/>
    <include path="v6/policy/reward.xml"/>

    <ReactiveSequence>
        <CanFireMissile/>
        <CustomRLCondition
                algo="ppo"
                reward_scope="attack"
                path="{{models_dir}}/models/{{models_episode}}/{{agent_name}}/CustomRLCondition"
                tensorboard_log="{{output}}/{{runtime}}/{{agent_name}}/CustomRLCondition"
                log_interval="1"
                save_path="{{output}}/{{runtime}}/models/{{episode}}/{{agent_name}}/CustomRLCondition"
                save_interval="10"
                verbose="1"
                train="{{train}}"
        />
        <FireMissileAtNearestEnemy/>
    </ReactiveSequence>

    <ReactiveSelector>
        <ReactiveSequence>
            <Inverter>
                <IsInSafeArea/>
            </Inverter>
            <GoToSafeArea/>
        </ReactiveSequence>

        <ReactiveSequence>
            <IsInSafeArea/>
            <Inverter>
                <IsEnemyDetected/>
            </Inverter>
            <Inverter>
                <IsMissileThreatDetected/>
            </Inverter>
            <CheatGoToNearestEnemyWithMemory/>
        </ReactiveSequence>

        <CustomRLGoToLocation
                algo="{{rl_algo}}"
                reward_scope="control"
                path="{{models_dir}}/models/{{models_episode}}/{{agent_name}}/CustomRLGoToLocation"
                save_path="{{output}}/models/{{episode}}/{{agent_name}}/CustomRLGoToLocation"
                tensorboard_log="{{output}}/{{runtime}}/{{agent_name}}/CustomRLGoToLocation"
                log_interval="1"
                save_interval="10"
                verbose="1"
                train="{{train}}"
        />
    </ReactiveSelector>
</Root>
